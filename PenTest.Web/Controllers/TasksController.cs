using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace PenTest.Web.Controllers
{
    public class Task
    {
        public string Name { get; set; }
    }

    public class CreateTaskModel
    {
        public string CreateTaskName { get; set; }
    }

    public static class Repository
    {
        public static Repository<Task> Tasks = new Repository<Task>();
    }
    public class TasksController : Controller
    {
        //
        // GET: /Task/
        public ActionResult Index()
        {
            return View(Repository.Tasks.GetAll());
        }

        //
        // POST: /Task/Create
        [HttpPost]
        public ActionResult Create(CreateTaskModel model)
        {
            Repository.Tasks.Save(Guid.NewGuid().ToString(), new Task() {Name = model.CreateTaskName});
            return RedirectToAction("Index");
        }
    }

    public class Repository<T>
    {
        private IDictionary<string, T> _store = new Dictionary<string,T>();

        public void Save(string id, T obj)
        {
            _store.Add(id,obj);
        }

        public IList<T> GetAll()
        {
            return _store.Values.ToList();
        }

        public T Get(string id)
        {
            return _store[id];
        }
    }
}
